/*
   Flowplayer
   @version 2.1.8
   @built   Mon, 07 Oct 2019 16:21:43 GMT
   @commit  2c6a33272d4d90ac92864a3a7b2f1b6440964b0b
   @license Flowplayer commercial license - https://flowplayer.com/commercial-license
*/
/* eslint-disable */
!function (t, e) { "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : (t.flowplayer = t.flowplayer || {}, t.flowplayer.subtitles = e()) }(this, function () { "use strict"; function t(t, e) { for (var n in e) t[n] = e[n]; return t } function e() { var e = D.call(arguments), n = e.shift(); return e.reduce(t, n) } function n(t) { return Array.isArray(t) ? t.slice(0) : t.split(".") } function r(t, e, r) { for (e = n(e); e.length;) { if (void 0 === t || null === t) return r; t = t[e.shift()] } return void 0 === t || null === t ? r : t } function i(t) { return D.call(t) } function o(t) { var e = document.createEvent("Event"); return e.initEvent(t, !1, !0), e } function a(e) { return e.emit = function (n, r, i) { i = i || {}; var a = o(n); return r && t(a, { data: r || {} }), e.dispatchEvent(a), !1 === i.return_self ? a : e }, e.on = function (t, n) { return "string" == typeof t && (t = t.split(" ")), t.forEach(function (t) { e.addEventListener(t, n) }), e }, e.off = function (t, n) { return e.removeEventListener(t, n), e }, e.one = e.once = function (t, n) { function r(i) { e.off(t, r), n(i) } return e.on(t, r) }, e } function s(t, e, n) { var r = l(document.createElement(t)); if (V(e) && (n = e, e = !1), V(n) || (n = [n]), r.append(n.filter(function (t) { return t })), "object" != typeof e) return r; for (var i in e) i in r ? r[i] = e[i] : r.setAttribute(i, e[i]); return r } function c(t) { return t && t[j] } function u(t) { var e = t.tagName; t[j] = 1, t.find = function (e) { var n = t.querySelector(e); return n ? l(n) : n }, t.html = function (e) { return t.innerHTML = e, t }, t.empty = function () { return t.innerHTML = P, t }, t.offset = function () { var e = { top: 0, left: 0 }, n = t; do { e.left += n.offsetLeft || 0, e.top += n.offsetTop || 0 } while (n = n.offsetParent); return e }, t.innerWidth = function () { var e = getComputedStyle(t); return t.clientWidth - parseFloat(e.paddingLeft) - parseFloat(e.paddingRight) }; var n = t.insert = function (e, n) { return V(n) ? n.map(function (n) { return t.insert(e, n) })[0] : (n = "string" == typeof n ? t.insertAdjacentHTML(e, n) : t.insertAdjacentElement ? t.insertAdjacentElement(e, n) : t.appendChild(n), l(n)) }; return t.append = n.bind(t, "beforeend"), t.prepend = n.bind(t, "afterbegin"), t.css = function (e, n) { if ("object" == typeof e) { for (var r in e) t.css(r, e[r]); return t } return void 0 === n ? getComputedStyle(t)[e] : (1 * n && (n += "px"), t.style[e] = n, t) }, t.show = function () { return t.css({ display: ~F.indexOf(e) ? "inline" : "block" }) }, t.hide = function () { return t.css({ display: "none" }) }, t.remove = function () { var e = t.parentNode; e && e.removeChild(t) }, t.attr = function (e, n) { return void 0 == n ? t.getAttribute(e) : (t.setAttribute(e, n), t) }, t.txt = function (e) { return t.textContent = e, t }, t.fp = function (e) { return t.addClass("fp-" + e) }, t.addClass = function (e) { return e.split(M).forEach(function (e) { t.hasClass(e) || (t.className += (t.className ? M : P) + e) }), t }, t.removeClass = function (e) { e = e.split(M); var n = t.className.split(M); return t.className = n.filter(function (t) { return !~e.indexOf(t) }).join(" "), t }, t.toggleClass = function (e, n) { return void 0 === n && (n = !t.hasClass(e)), n ? t.addClass(e) : t.removeClass(e) }, t.findAll = function (e) { return i(t.querySelectorAll(e)) }, t.hasClass = function (e) { return ~t.className.split(M).indexOf(e) }, t } function l(t) { return void 0 === t ? t : c(t) ? t : u(a(t)) } function f(t, e) { if ("string" == typeof t && "<" == t[0]) return s(t.slice(1, -1), e); if ("string" != typeof t) return l(t); var n = e instanceof HTMLElement && e.querySelector(".fp-" + t) || document.querySelector(t); return n ? l(n) : void 0 } function d(t) { return document.createElementNS("http://www.w3.org/2000/svg", t) } function p(t) { var e = d("svg"); return e.setAttribute("viewBox", t.coords), t.name && e.setAttribute("class", t.name), t.title && e.setAttribute("title", t.title), t.title && e.setAttribute("aria-label", t.title), e.setAttribute("tabindex", "0"), e.appendChild(E(t.link)), f(e) } function E(t) { var e = d("use"); return e.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", t), e } function m(t, n, r) { var i = r.id || "menu-" + v(); return r = r || {}, t.attr("role", "button").attr("aria-haspopup", "true").attr("aria-expanded", "false").attr("aria-controls", i).attr("aria-label", r.title), r.options = r.options || [], r.id = i, m._interface(t, n, e({}, r)) } function v() { return Math.random().toString(36).replace(/[^a-z]+/g, "").substr(0, 5) } function h(t) { return "function" == typeof t } function g() { throw new Error("Function was expected as Argument[0]") } function _(t) { if (!(this instanceof _)) return new _(t); var e = this; return e.data = t, e.tap = function () { var t = Q.call(arguments), n = t.shift(); return n == _.lift ? e.data : h(n) ? (n.apply(e, [e.data].concat(t)), e) : void g() }, e.into = e.fmap = function () { var t = Q.call(arguments), n = t.shift(); return n == _.lift ? e.data : h(n) ? _(n.apply(e, [e.data].concat(t))) : void g() }, e.unwrap = function () { return e.data }, e } function y(t) { switch (t) { case "": case X: case Z: return !0; default: console.warn("Invalid(crossorigin: %s) must be one of '', 'anonymous', or 'use-credentials'\nhttps://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes", t) } } function O(t, e) { if (e = e || X, y(e), t.crossOrigin != e) return t.attr("crossorigin", e), t } function A(t) { var e = document.createElement("a"); return e.href = t, e.origin } function N(t, e) { try { return t.src.indexOf("blob:"), A(t.src) !== A(e) } catch (t) { return console.error(t), !0 } } function C(t, e) { return t.querySelector("track[src='" + e + "']") } function T(t, e) { var n = C(e, t.src); if (n) return n; "string" != typeof t.crossorigin && N(e, t.src) && (O(e), t.crossorigin = e.attr("crossorigin")), "crossorigin" in t && O(e, t.crossorigin), "object" == typeof t && 1 == t.is_default && (delete t.is_default, t.default = !0), t.default || delete t.default, t.id = t.id || [t.srclang, t.label, t.lang].filter(function (t) { return !!t }).join("-"); var r = f("<track>", t); return e.append(r), r } function L(t, e) { return { text: t.label, track: t, onclick: S.bind(0, e) } } function S(t, e, n, r, i) { [].forEach.call(t.textTracks, function (e) { return "showing" == e.mode && n.track == e ? (i.deactivate(r, !1), t.emit(q), e.mode = "disabled") : e == n.track ? (i.activate(r, !0), t.emit(q, e), e.mode = "showing") : void (e.mode = "disabled") }) } function x(t) { return t.filter(function (t) { return t && ~J.indexOf(t.kind) }) } function k(t) { var e = document.createElement("a"); return e.href = t, e } function b(t, e) { return k(t).href == k(e).href } function w(t, e) { return 1 == t.filter(function (t) { return b(t.src, e) }).length } function I(t, e, n, r) { var o = _.of(t).fmap(i).fmap(x).tap(R, n, e).fmap(_.lift); 1 == o.length && r.toggleClass("fp-color-text", "showing" == o[0].mode) } function R(t, e, n) { _.of(t).fmap(G, L, n).fmap(e.render), t.forEach(function (t, n) { "showing" == t.mode && e.activate(n) }) } function U(t, e) { e.toggleClass("fp-color-text", "showing" == t.mode) } function G(t, e, n, r, i) { return t.map(function (t) { return e.call(this, t, n, r, i) }) } var D = [].slice, P = "", M = " ", V = Array.isArray, Y = "undefined" != typeof window && a(window), H = "undefined" != typeof document && a(document), F = ["span", "a", "em", "p", "i"], K = F.concat(["div", "strong", "video", "img", "ol", "ul", "li", "script"]), j = "__flowplayer__"; f.window = Y, f.document = H, f.el = s, K.forEach(function (t) { f[t] = function (e, n) { return "string" == typeof e && (e = { class: e }), s(t, e, n) } }); var W = { MOUNT: "mount", ERROR: "error", CONTEXT_MENU: "contextmenu", CLICK: "click", DBL_CLICK: "dblclick", KEYUP: "keyup", KEYDOWN: "keydown", LOAD: "load", MOUSE_ENTER: "mouseenter", MOUSE_LEAVE: "mouseleave", MOUSE_UP: "mouseup", MOUSE_DOWN: "mousedown", MOUSE_MOVE: "mousemove", TOUCH_START: "touchstart", TOUCH_MOVE: "touchmove", TOUCH_END: "touchend", TOUCH_CANCEL: "touchcancel", RESIZE: "resize", SCROLL: "scroll", FULLSCREEN_ENTER: "fullscreenenter", FULLSCREEN_EXIT: "fullscreenexit", FULLSCREEN_CHANGE: "fullscreenchange", METADATA: "loadedmetadata", DATA: "loadeddata", PROGRESS: "progress", TIME_UPDATE: "timeupdate", LOAD_START: "loadstart", VOLUME_CHANGE: "volumechange", PAUSE: "pause", PLAYING: "playing", PLAY: "play", WAITING: "waiting", CAN_PLAY: "canplay", ENDED: "ended", SEEKED: "seeked", SEEKING: "seeking", DURATION_CHANGE: "durationchange", BEFORE_PLAY: "beforeplay", BEFORE_PAUSE: "beforepause", STATE: "state", CUEPOINTS: "cuepoints", CUEPOINT_START: "cuepointstart", CUEPOINT_END: "cuepointend", VIEW_ENTER: "viewenter", VIEW_LEAVE: "viewleave", SOURCE: "src", RECOVER: "recover", REAP: "reap", CONFIG: "config", QUALITIES: "qualities", SET_QUALITY: "quality:set", NON_RECOVERABLE_ERROR: "error:fatal", RECOMMENDATIONS_READY: "recommendationsready", AUDIO_ONLY_SOURCE: "audioonlysource" }, q = "tracks:text:updated", B = { TOGGLE_OPEN: "menu:toggle:open", RENDER: "menu:render", PUSH: "menu:push" }, z = { ON: "fp-on", INVIS: "fp-invis" }; m.title = function (t) { return f("<h3>").txt(t) }, m.close = function (t) { return f.span("fp-close").on(W.CLICK, t).html("&times;") }, m.option = function (t, e) { var n = this, r = f("<li>").attr("tabindex", "0").attr("role", "menuitem"), i = n._attrs; t.icon && r.append(p(t.icon)), r.append(f("<span>").txt(t.text)), r.on(W.CLICK, function (r) { i.multi || n.options().forEach(m.off), n.activate(e), "function" == typeof t.onclick && t.onclick(r, t, e, n) }), r.idx = e, n.append(r) }, m._interface = function (t, e, n) { t.addClass("fp-menu-container"); var i = f("<ul>").attr("id", n.id).addClass("fp-menu").attr("role", "menu"); return n.icons && i.addClass("fp-icons"), i._attrs = n, t.on(W.CLICK, function (t) { setTimeout(function () { if (!t.defaultPrevented) return i.hasClass(z.ON) ? e.emit(B.TOGGLE_OPEN, { menu: i, open: !1 }) : void e.emit(B.TOGGLE_OPEN, { menu: i, open: !0 }) }, 0) }), i.on(W.MOUSE_LEAVE, function () { e.emit(B.TOGGLE_OPEN, { menu: i, open: !1 }) }), e.on(B.TOGGLE_OPEN, function (n) { if (r(n, "data.menu") === i) { var o = r(n, "data.open", !1); if (i.toggleClass(z.ON, o), t.attr("aria-expanded", o ? "true" : "false"), e.hasClass("is-accessibility")) { if (!o) return void t.focus(); var a = i.options()[0]; a && a.focus() } } }), i.push = function (t) { return i._attrs.options = r(i, "_attrs.options", []), i._attrs.options.push(t), i.render() }, i.select = function (t) { return i.render(i.options.filter(t)) }, i.render = function (e) { var n = i._attrs; return i.empty(), i.prepend(m.close()), n.title && i.prepend(m.title(n.title)), n.options = e || n.options, n.options.forEach(m.option, i), t.toggleClass(z.INVIS, 0 == n.options.length), i._activate(), i }, i.close = function () { i.hasClass(z.ON) && e.emit(B.TOGGLE_OPEN, { menu: i, open: !1 }) }, i._activate = function () { i.options().forEach(function (t) { t.toggleClass(z.ON, t.idx === i.idx) }) }, i.options = function () { return [].slice.call(i.querySelectorAll("li")) }, i.activate = function (t, e) { void 0 === i.idx || i.idx !== t || e ? i.idx = t : delete i.idx, i._activate() }, i.deactivate = function () { i.activate(i.idx) }, i.render(n.options), t.appendChild(i), i }, m.on = function (t) { return t.addClass(z.ON), t }, m.off = function (t) { return t.removeClass(z.ON), t }, m.CONTAINER_CLASS = "fp-menu", m.Events = B, m.States = z; var Q = [].slice; _.of = _, _.lift = function (t) { return t instanceof _ ? t.data : t }, _._apply = function (t, e) { if (0 == e.length) return t(); if (1 == e.length) return t(e[0]); if (2 == e.length) return t(e[0], e[1]); if (3 == e.length) return t(e[0], e[1], e[2]); if (4 == e.length) return t(e[0], e[1], e[2], e[3]); if (5 == e.length) return t(e[0], e[1], e[2], e[3], e[4]); throw new Error("Pipe._apply() does not support arity > 5") }, _.maybe = function (t, e, n) { return t ? _._apply(e, [t].concat(Q.call(arguments, 2, arguments.length))) : t }, _.curry = function (t, e, n) { return e = e || [], e.length > t.length - 1 ? t.apply(n, e) : function () { return e = e.concat(Q.call(arguments)), _.curry(t, e, n) } }; var X = "anonymous", Z = "use-credentials", J = ["subtitles", "captions", "descriptions"], $ = { FULLSCREEN: "is-fullscreen", PLAYING: "is-playing", PAUSED: "is-paused", MUTED: "is-muted", LOADED: "is-loaded", LOADING: "is-loading", STARTING: "is-starting", SEEKING: "is-seeking", GRABBING: "is-grabbing", DISABLED: "is-disabled", SMALL: "is-small", TINY: "is-tiny", RTL: "is-rtl", ENDED: "is-ended", LIVE: "is-live", ERRORED: "is-error", WAITING: "is-waiting", AUTOPLAY: "is-autoplay", SEAMLESS: "is-seamless", NO_AUTOPLAY: "no-autoplay", TOGGLING: "is-toggling", LIVE_SEEKED: "is-live-seeked", NO_DVR: "no-timeline" }; return function (t, e) { if ("object" == typeof exports && "undefined" != typeof module) return e; "flowplayer" in t || (t.flowplayer = { extensions: [] }); var n = t.flowplayer; return "function" == typeof n ? (n(e), e) : (Array.isArray(n.extensions) || (n.extensions = []), ~n.extensions.indexOf(e) || n.extensions.push(e), e) }(window, function (t, e, n) { var o = f.span("fp-cc fp-menu-container").attr("tabindex", "0"), a = m(o, e, { title: n._t("cc.menu_title"), options: [] }); n.reaper.put("_tracks", []), n.reaper.put("_track_elements", []), o.on("click", function (t) { var e = _.of(n._tracks).fmap(i).fmap(x).fmap(_.lift); 1 === e.length && (t.preventDefault(), a.options().shift().emit("click"), U(e[0], o)) }), n.on(W.CONFIG, function () { _.of(t).fmap(r, "subtitles.tracks").tap(_.maybe, function (t) { var e = n._track_elements || []; e.slice(0).forEach(function (n, r) { w(t, n.src) || (n.remove(), e.splice(r, 1)) }) }).tap(_.maybe, function (t) { return n._track_elements = G(t, T, n), n._track_elements.map(function (t) { return t.track }) }).tap(_.maybe, function () { n._tracks = i(n.textTracks) }).tap(_.maybe, function (t) { n.emit("tracks:text:all", n._tracks), n._tracks.forEach(function (t, e) { "showing" == t.mode && a.activate(e, !0) }) }) }), n.one(W.MOUNT, function () { if (0 != e.reaper && (e.controls && e.controls.append(o), 0 != n.textTracks.length)) { var t = i(n.textTracks); n.emit("tracks:text:all", t) } }), n.textTracks.addEventListener("addtrack", function () { n.hls || n.emit("tracks:text:all", i(n.textTracks)) }), n.textTracks.addEventListener("removetrack", function () { n.hls || n.emit("tracks:text:all", i(n.textTracks)) }), n.on("tracks:text:all", function (t) { n._tracks = r(t, "data", []), I(n._tracks, n, a, o) }), n.on("tracks:text:change", function (t) { "number" == typeof t.data && a.activate(t.data) }), n.on(W.STATE, function (t) { n.hasState("is-touched") || n.hasState("is-hovered") || !n.hasState($.PLAYING) || a.close() }) }) });
